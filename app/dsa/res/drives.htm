<body>

	<button id='btn_all' onclick='switch_list("all")' class="first">All</button>
	<button id='btn_fixed' onclick='switch_list("fixed")'>Fixed</button>
	<button id='btn_ramdisk' onclick='switch_list("ramdisk")'>Ramdisk</button>
	<button id='btn_remote' onclick='switch_list("remote")' class="last">Remote</button>

	<ul id="dlist">
	</ul>

	<?global
		str::t_string mkitem( str::t_string grp, t_pb::iterator &it, str::t_string id )
		{
			return str::t_string() 
					+ "<li id='iid_" + grp + "_" + id +"' class='drive-item' data-id='did_" + id + "' onclick='selDrive( \"iid_" + grp + "_" + id +"\" )'>" + it->first + "</li>\n";
		}
	?>

	<?c
		t_pb di;
		disk::GetDisksInfo( di, true );
	?>

	<ul id="list_all" class="hidden">
	<?c
		int i = 0;
		for( t_pb::iterator it = di.begin(); it != di.end(); it++, i++ )
			out += mkitem( "all", it, str::ToString< str::t_char, str::t_string>( i ) );
	?>
	</ul>

	<ul id="list_fixed" class="hidden">
	<?c
		i = 0;
		for( t_pb::iterator it = di.begin(); it != di.end(); it++, i++ )
			if ( (*it->second)[ tcT( "drive_type" ) ].ToString() == "fixed" )
				out += mkitem( "fixed", it, str::ToString< str::t_char, str::t_string>( i ) );
	?>
	</ul>

	<ul id="list_ramdisk" class="hidden">
	<?c
		i = 0;
		for( t_pb::iterator it = di.begin(); it != di.end(); it++, i++ )
			if ( (*it->second)[ tcT( "drive_type" ) ].ToString() == "ramdisk" )
				out += mkitem( "ramdisk", it, str::ToString< str::t_char, str::t_string>( i ) );
	?>
	</ul>

	<ul id="list_remote" class="hidden">
	<?c
		i = 0;
		for( t_pb::iterator it = di.begin(); it != di.end(); it++, i++ )
			if ( (*it->second)[ tcT( "drive_type" ) ].ToString() == "remote" )
				out += mkitem( "remote", it, str::ToString< str::t_char, str::t_string>( i ) );
	?>
	</ul>

	<script type="text/javascript">

		var g_list = 0;
		function switch_list( id )
		{	$('button').removeClass( 'active' );
			$('#btn_'+id).addClass( 'active' );
			$('#dlist').quicksand( $('#list_'+id+' li') );			
			if ( ++g_list > 3 ) g_list = 0;
		}

		function selDrive(id)
		{	var pos = $('#'+id).offset(), w = $('#'+id).width(), h = $('#'+id).height();
			$('#highlight').html( $('#'+id).html() );
			$('#highlight').css( { opacity: 1, left: pos.left, top: pos.top, width: w, height: h } );
			$('#highlight').show().animate( { left: 60, top: 10 }, 500 );
			selPage( 'graph' );
		}

		switch_list("all");

	</script>
</body>

