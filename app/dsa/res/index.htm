<!DOCTYPE html>
<html>
  <head>
    <title><?c out << CII_PROJECT_DESC ?></title>

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<meta http-equiv="Access-Control-Allow-Origin" content="*">
	<meta http-equiv="Access-Control-Allow-Methods" content="POST GET OPTIONS">

    <link type="text/css" rel="stylesheet" href="css/main.css"/>
    <link type="text/css" rel="stylesheet" href="css/button.css"/>

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <!--<script type="text/javascript" src="js/jquery.sparkline.min.js"></script>-->
    <script type="text/javascript" src="js/jquery.quicksand.js"></script>
    <script type="text/javascript" src="js/d3/d3.min.js"></script>
    <script type="text/javascript" src="js/d3/d3.layout.min.js"></script>

  </head>
  <body>
 
    <div class='hdr bdr_gray' onclick='selPage( "drives" )'>
		<img src='imgs/pie2.png' onclick='selPage( "drives" )'>
		<div class='hdr_size hdr_text bdr_gray'></div>
		<div class='hdr_progress hdr_text bdr_gray hidden'>
			<div class='progress_a'></div>
			<div class='progress_b'></div>
		</div>
		<div class='hdr_path hdr_text bdr_gray'></div>
	</div>
    
	<div class='highlight hdr_text'></div>	
	<div id='drives' class='page'></div>
	<div id='graph' class='page hidden'></div>

	<script type='text/javascript'>

		$( $('#drives').load( 'drives.htm' ) );
//		$( $('#graph').load( 'graph.htm' ) );

		var g_sel = '';
		function getPage()
		{
			return g_sel;
		}
		
		function showPage( id, page, dir )
		{
			if ( page == id )
				$( $('#'+id).load( id+'.htm?root=' + $('.highlight').html() ) ),
				$('#'+id).hide().animate( { left: dir/*, opacity:0*/ }, 0 ),
				$('#'+id).show().animate( { left:'20px'/*, opacity:1*/ }, 500 );
			else
				$('#'+id).animate( { left: dir/*, opacity: 0*/ }, 500 ),
				setTimeout( function() { $('#'+id).hide(); }, 500 );
		}
		
		function selPage( page )
		{	if ( g_sel == page ) return;
			g_sel = page;
			showPage( "drives", page, -1000 );
			showPage( "graph", page, 1000 );
			if ( "graph" != page ) $('.highlight').animate( { opacity: 0 }, 500 );
		}

		function setProgress( progress, total )
		{
			var pa = ( 0 < total ) ? parseInt( progress * 100 / total ) : 0;
			var pb = ( 0 < total ) ? parseInt( ( total - progress ) * 100 / total ) : 0;
			var w = $('.hdr_progress').width() - 20;
			var h = $('.hdr_progress').height();
			
			// $('.progress_a').html( w + ' / ' + h + ' / ' + pa + ' / ' + pb );
			
			if ( 0 >= w || 0 >= h || 0 >= pa || 100 <= pa )
			{	$('.hdr_progress').addClass( 'hidden' );
				return;
			} // end if
					
			$('.hdr_progress').removeClass( 'hidden' );
			
			$('.progress_a').height( h );
			$('.progress_a').width( parseInt( pa * w / 100 ) + 10 );
			$('.progress_b').height( h );
			$('.progress_b').width( parseInt( pb * w / 100 ) + 10 );
		}

	</script>
  </body>
</html>